# Read `man 5 sway` for a complete reference.

### Variables
#
# Logo key. Use Mod1 for Alt.
set $mod Mod4

# Home row direction keys, like vim
set $left h
set $down j
set $up k
set $right l

# Your preferred terminal emulator
set $term alacritty

# Your preferred browser
set $browser google-chrome --ozone-platform=wayland

# Your preferred application launcher
# Note: pass the final command to swaymsg so that the resulting window can be opened
# on the original workspace that the command was run on.
#set $menu dmenu_path | wmenu | xargs swaymsg exec --
set $menu wofi --allow-images --no-actions --width=25\% --insensitive --show=drun | xargs swaymsg exec --
set $run wofi --allow-images --no-actions --width=25\% --show=run | xargs swaymsg exec --

include /etc/sway/config.d/*

### Output configuration
#
# Default wallpaper (more resolutions are available in /usr/share/backgrounds/sway/)
output * bg ~/.config/sway/debian.png center #2E3440

bindsym $mod+Ctrl+equal exec sway-scale up
bindsym $mod+Ctrl+minus exec sway-scale down
bindsym $mod+Ctrl+0 exec sway-scale default

# Example configuration:
#
#   output HDMI-A-1 resolution 1920x1080 position 1920,0
#
# You can get the names of your outputs by running: swaymsg -t get_outputs

# Enable/disable laptop screen based on lid position
set $laptop eDP-1
bindswitch --reload --locked lid:on output $laptop disable
bindswitch --reload --locked lid:off output $laptop enable
exec_always ~/bin/sway-laptop-lid

### Idle configuration
#
# Example configuration:
#
exec swayidle -w \
        idlehint 120 \
        lock 'swaylock -f' \
        timeout 300 'loginctl lock-session' \
        timeout 600 'swaymsg "output * power off"' resume 'swaymsg "output * power on"' \
        before-sleep 'loginctl lock-session'

# Hide cursor after timeout, or when typing. Unclutter.
seat * hide_cursor 5000
seat * hide_cursor when-typing enable

# This will lock your screen after 300 seconds of inactivity, then turn off
# your displays after another 300 seconds, and turn your screens back on when
# resumed. It will also lock your screen before your computer goes to sleep.

### Input configuration
#
# Example configuration:
#
input type:touchpad {
    dwt enabled
    tap enabled
    natural_scroll enabled
    middle_emulation enabled
}

input type:pointer {
    natural_scroll enabled
}

focus_follows_mouse no

input type:keyboard {
    xkb_numlock enabled
    xkb_options caps:ctrl_modifier
}

# settings for x1 keyboard
input "1:1:AT_Translated_Set_2_keyboard" {
    xkb_options caps:ctrl_modifier,altwin:swap_lalt_lwin
}
#
# You can get the names of your inputs by running: swaymsg -t get_inputs
# Read `man 5 sway-input` for more information about this section.  i3

# Autostart apps
exec pasystray
exec nm-applet
exec blueman-applet
exec 1password --silent
exec kdeconnect-indicator
exec calibre --start-in-tray

# Polkit agent for admin auth dialogs. The gnome one is broken, but we should check if it's fixed.
exec /usr/lib/x86_64-linux-gnu/libexec/polkit-kde-authentication-agent-1

### Key bindings
#
# Basics:
#
    # Start a terminal
    bindsym $mod+Return exec $term

    # Start a browser
    bindsym $mod+Shift+Return exec $browser

    # Kill focused window
    bindsym $mod+Shift+q kill

    # Start your launcher
    bindsym $mod+Space exec $menu
    bindsym $mod+Shift+Space exec $run
    bindsym $mod+Alt+Space exec sway-select-window

    # Drag floating windows by holding down $mod and left mouse button.
    # Resize them with right mouse button + $mod.
    # Despite the name, also works for non-floating windows.
    # Change normal to inverse to use left mouse button for resizing and right
    # mouse button for dragging.
    floating_modifier $mod normal

#
# Moving around:
#
    # Move your focus around
    bindsym $mod+$left focus left
    bindsym $mod+$down focus down
    bindsym $mod+$up focus up
    bindsym $mod+$right focus right
    # Or use $mod+[up|down|left|right]
    bindsym $mod+Left focus left
    bindsym $mod+Down focus down
    bindsym $mod+Up focus up
    bindsym $mod+Right focus right

    # Move the focused window with the same, but add Shift
    bindsym $mod+Shift+$left move left
    bindsym $mod+Shift+$down move down
    bindsym $mod+Shift+$up move up
    bindsym $mod+Shift+$right move right
    # Ditto, with arrow keys
    bindsym $mod+Shift+Left move left
    bindsym $mod+Shift+Down move down
    bindsym $mod+Shift+Up move up
    bindsym $mod+Shift+Right move right
#
# Workspaces:
#

    set $ws1 1:<span> </span><span>1 </span><span foreground='#5E81AC'></span><span> </span>
    set $ws2 2:<span> </span><span>2 </span><span foreground='#88C0D0'></span><span> </span>
    set $ws3 3:<span> </span><span>3 </span><span foreground='#A3BE8C'></span><span> </span>
    set $ws4 4:<span> </span><span>4 </span><span foreground='#EBCB8B'>󰅩</span><span> </span>
    set $ws5 5:<span> </span><span>5 </span><span foreground='#D08770'>󰅩</span><span> </span>
    set $ws6 6:<span> </span><span>6 </span><span foreground='#BF616A'>󰅩</span><span> </span>
    set $ws7 7:<span> </span><span>7 </span><span foreground='#5E81AC'></span><span> </span>
    set $ws8 8:<span> </span><span>8 </span><span foreground='#B48EAD'></span><span> </span>
    set $ws9 9:<span> </span><span>9 </span><span foreground='#E5E9F0'></span><span> </span>
    set $ws10 10:<span> </span><span>10 </span><span foreground='#5E81AC'>󰝚</span><span> </span>
    set $ws11 11:<span> </span><span>11 </span><span foreground='#88C0D0'></span><span> </span>
    set $ws12 12:<span> </span><span>12 </span><span foreground='#A3BE8C'></span><span> </span>
    set $ws13 13:<span> </span><span>13 </span><span foreground='#EBCB8B'></span><span> </span>
    set $ws14 14:<span> </span><span>14 </span><span foreground='#D08770'></span><span> </span>
    set $ws15 15:<span> </span><span>15 </span><span foreground='#BF616A'></span><span> </span>
    set $ws16 16:<span> </span><span>16 </span><span foreground='#5E81AC'></span><span> </span>
    set $ws17 17:<span> </span><span>17 </span><span foreground='#B48EAD'></span><span> </span>
    set $ws18 18:<span> </span><span>18 </span><span foreground='#E5E9F0'></span><span> </span>
    set $ws19 19:<span> </span><span>19 </span><span foreground='#5E81AC'></span><span> </span>

    # Switch to workspace
    bindsym $mod+1 workspace number $ws1
    bindsym $mod+2 workspace number $ws2
    bindsym $mod+3 workspace number $ws3
    bindsym $mod+4 workspace number $ws4
    bindsym $mod+5 workspace number $ws5
    bindsym $mod+6 workspace number $ws6
    bindsym $mod+7 workspace number $ws7
    bindsym $mod+8 workspace number $ws8
    bindsym $mod+9 workspace number $ws9
    bindsym $mod+0 workspace number $ws10
    bindsym $mod+Ctrl+1 workspace number $ws11
    bindsym $mod+Ctrl+2 workspace number $ws12
    bindsym $mod+Ctrl+3 workspace number $ws13
    bindsym $mod+Ctrl+4 workspace number $ws14
    bindsym $mod+Ctrl+5 workspace number $ws15
    bindsym $mod+Ctrl+6 workspace number $ws16
    bindsym $mod+Ctrl+7 workspace number $ws17
    bindsym $mod+Ctrl+8 workspace number $ws18
    bindsym $mod+Ctrl+9 workspace number $ws19

    bindsym $mod+Alt+Right workspace next
    bindsym $mod+Alt+$right workspace next
    bindsym $mod+Alt+Left workspace prev
    bindsym $mod+Alt+$left workspace prev
    

    # Move focused container to workspace
    bindsym $mod+Shift+1 move container to workspace number $ws1
    bindsym $mod+Shift+2 move container to workspace number $ws2
    bindsym $mod+Shift+3 move container to workspace number $ws3
    bindsym $mod+Shift+4 move container to workspace number $ws4
    bindsym $mod+Shift+5 move container to workspace number $ws5
    bindsym $mod+Shift+6 move container to workspace number $ws6
    bindsym $mod+Shift+7 move container to workspace number $ws7
    bindsym $mod+Shift+8 move container to workspace number $ws8
    bindsym $mod+Shift+9 move container to workspace number $ws9
    bindsym $mod+Shift+0 move container to workspace number $ws10
    bindsym $mod+Ctrl+Shift+1 move container to workspace number $ws11
    bindsym $mod+Ctrl+Shift+2 move container to workspace number $ws12
    bindsym $mod+Ctrl+Shift+3 move container to workspace number $ws13
    bindsym $mod+Ctrl+Shift+4 move container to workspace number $ws14
    bindsym $mod+Ctrl+Shift+5 move container to workspace number $ws15
    bindsym $mod+Ctrl+Shift+6 move container to workspace number $ws16
    bindsym $mod+Ctrl+Shift+7 move container to workspace number $ws17
    bindsym $mod+Ctrl+Shift+8 move container to workspace number $ws18
    bindsym $mod+Ctrl+Shift+9 move container to workspace number $ws19

# Layout stuff:
#
    # You can "split" the current object of your focus with
    # $mod+b or $mod+v, for horizontal and vertical splits
    # respectively.
    bindsym $mod+b splith
    bindsym $mod+v splitv

    # Switch the current container between different layout styles
    bindsym $mod+s layout stacking
    bindsym $mod+w layout tabbed
    bindsym $mod+e layout toggle split

    # Make the current focus fullscreen
    bindsym $mod+f fullscreen

    # Toggle the current focus between tiling and floating mode
    bindsym $mod+Shift+f floating toggle

    # Swap focus between the tiling area and the floating area
    bindsym $mod+Ctrl+f focus mode_toggle

    # Move focus to the parent container
    bindsym $mod+a focus parent
    # Move focus to the child container
    bindsym $mod+z focus child
#
# Scratchpad:
#
    # Sway has a "scratchpad", which is a bag of holding for windows.
    # You can send windows there and get them back later.

    # Move the currently focused window to the scratchpad
    bindsym $mod+Shift+minus move scratchpad

    # Show the next scratchpad window or hide the focused scratchpad window.
    # If there are multiple scratchpad windows, this command cycles through them.
    bindsym $mod+minus scratchpad show
#
# Resizing containers:
#
mode "resize" {
    # left will shrink the containers width
    # right will grow the containers width
    # up will shrink the containers height
    # down will grow the containers height
    bindsym $left resize shrink width 20px
    bindsym $down resize grow height 20px
    bindsym $up resize shrink height 20px
    bindsym $right resize grow width 20px

    # Ditto, with arrow keys
    bindsym Left resize shrink width 20px
    bindsym Down resize grow height 20px
    bindsym Up resize shrink height 20px
    bindsym Right resize grow width 20px

    # Return to default mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

#
# Session Management
#
bindsym $mod+Escape exec loginctl lock-session

set $session "Session Mode: [l]ock, log[o]ut, [s]uspend, [h]ibernate, [r]eboot, [p]ower off, reload [c]onfig"
mode $session {
  bindsym c reload, mode "default"
  bindsym o exit, mode "default"
  bindsym l exec loginctl lock-session, mode "default"
  bindsym r exec systemctl reboot, mode "default"
  bindsym p exec systemctl poweroff, mode "default"
  bindsym s exec systemctl suspend-then-hibernate, mode "default"
  bindsym h exec systemctl hibernate, mode "default"

  bindsym Escape mode "default"
}
bindsym $mod+Shift+Escape mode $session

#
# Media Keys
bindsym XF86AudioRaiseVolume exec volume up 5
bindsym XF86AudioLowerVolume exec volume down 5
bindsym XF86AudioMute exec volume mute
bindsym XF86AudioMicMute exec volume mute mic
bindsym XF86MonBrightnessDown exec brightness 10%-
bindsym XF86MonBrightnessUp exec brightness 10%+
bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous
bindsym XF86Search exec $menu

#
# Gestures
bindgesture swipe:3:right workspace prev
bindgesture swipe:3:left workspace next

#
# Screenshots
#
bindsym $mod+p exec grimshot copy anything
bindsym $mod+Shift+p exec grimshot save anything

#
# App Shortcuts
bindsym $mod+backslash exec 1password --quick-access
bindsym $mod+Shift+backslash exec 1password
bindsym $mod+Shift+n exec nautilus
bindsym $mod+Shift+e exec bemoji -t

#
# Inhibit idle
for_window [con_mark="no idle"] inhibit_idle open; border normal 2
bindsym $mod+Shift+i [con_mark="no idle"] inhibit_idle none; [con_mark="no idle"] border pixel 2; \
                mark --toggle "no idle"; \
                [con_mark="no idle"] inhibit_idle open; [con_mark="no idle"] border normal 2

#
# Window overrides
for_window {
    [shell="xwayland"] title_format "[XW] %title"

    [title=".*1Password$"] floating enable
    [title="^Copying.*Dolphin$"] floating enable

    [app_id="StorageExplorer" title="^Connect to Azure Storage$"] floating enable
    [app_id="StorageExplorer" title="^Edit Entity$"] floating enable
    [app_id="StorageExplorer" title="^Add Entity$"] floating enable

    [app_id="pavucontrol"] floating enable

    [app_id="org.gnome.Calculator"] floating enable
    [app_id="org.gnome.tweaks"] floating enable
    [app_id="org.gnome.baobab"] floating enable
    [app_id="org.gnome.FileRoller"] floating enable
    [app_id="org.gnome.NautilusPreviewer"] floating enable
    [app_id="gnome-disks"] floating enable
    [app_id="software-properties-gtk"] floating enable

    [app_id="blueman-manager"] floating enable
    [app_id="blueman-services"] floating enable
    [app_id="blueman-sendto"] floating enable

    [app_id="org.kde.polkit-kde-authentication-agent-1"] floating enable
    [app_id="org.kde.kdeconnect-settings"] floating enable
    [app_id="org.kde.kdeconnect-indicator"] floating enable
    [app_id="org.kde.kdeconnect.handler"] floating enable
    [app_id="org.kde.kdeconnect.app"] floating enable

    [window_role="pop-up"] floating enable
    [window_role="bubble"] floating enable
    [window_role="dialog"] floating enable
    [window_type="dialog"] floating enable

    [title="(?:Open|Save) (?:File|Folder|As)"] floating enable
    [title="^Select path to save file$"] floating enable
}

#
# Colors
#

set $color_base03   #2E3440
set $color_base02   #3B4252
set $color_base01   #434C5E
set $color_base00   #7B8394
set $color_base0    #D8DEE9
set $color_base1    #E5E9F0
set $color_base2    #ECEFF4
set $color_base3    #ECEFF4
set $color_yellow   #EBCB8B
set $color_orange   #D08770
set $color_red      #BF616A
set $color_magenta  #5E81AC
set $color_violet   #B48EAD
set $color_blue     #5E81AC
set $color_lblue    #81A1C1
set $color_cyan     #88C0D0
set $color_green    #A3BE8C
set $color_nord4    #4C566A

#                       Border        Background    Foreground    Indicator     Child Border
client.focused          $color_lblue  $color_base01 $color_base3  $color_lblue  $color_lblue
client.focused_inactive $color_base01 $color_base03 $color_base00 $color_base02 $color_base03
client.unfocused        $color_base01 $color_base03 $color_base00 $color_base02 $color_base03
client.urgent           $color_base03 $color_red    $color_base3  $color_red    $color_base03

#
# Configuraiton
#
font pango:FontAwesome, Cantarell 12
default_border pixel 2
default_floating_border pixel 2
smart_borders on
smart_gaps on
gaps inner 0
gaps outer 0

#
# Status Bar:
#
# Read `man 5 sway-bar` for more information about this section.
bar {
    font pango:FontAwesome, Cantarell 20px
    pango_markup enabled

    mode hide
    position bottom

    strip_workspace_numbers yes
    workspace_min_width 50

    status_edge_padding 100
    tray_padding 2
    icon_theme Papirus-Dark

    status_command i3blocks

    colors {
        background $color_base02
        statusline $color_base1
        # separator  $color_blue

        #                  Border         Backgnd        Foregnd
        focused_workspace  $color_base03  $color_base03  $color_base2
        active_workspace   $color_base03  $color_base03  $color_base00
        inactive_workspace $color_base02  $color_base02  $color_base00
        urgent_workspace   $color_red     $color_red     $color_base3
        binding_mode       $color_yellow  $color_yellow  $color_base03
    }
}

# bar {
#     mode hide
#
#     swaybar_command waybar
# }

include /etc/sway/config.d/*
